<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>qbits.alia.policy.load-balancing documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Alia 2.0.0-rc2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>qbits</span></div></div></li><li class="depth-2"><a href="qbits.alia.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>alia</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></div></li><li class="depth-4 branch"><a href="qbits.alia.codec.eaio-uuid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>eaio-uuid</span></div></a></li><li class="depth-4"><a href="qbits.alia.codec.joda-time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>joda-time</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>policy</span></div></div></li><li class="depth-4 branch current"><a href="qbits.alia.policy.load-balancing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>load-balancing</span></div></a></li><li class="depth-4 branch"><a href="qbits.alia.policy.reconnection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reconnection</span></div></a></li><li class="depth-4"><a href="qbits.alia.policy.retry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>retry</span></div></a></li><li class="depth-3"><a href="qbits.alia.uuid.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>uuid</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li><a href="qbits.alia.policy.load-balancing.html#var-dc-aware-round-robin-policy"><div class="inner"><span>dc-aware-round-robin-policy</span></div></a></li><li><a href="qbits.alia.policy.load-balancing.html#var-round-robin-policy"><div class="inner"><span>round-robin-policy</span></div></a></li><li><a href="qbits.alia.policy.load-balancing.html#var-token-aware-policy"><div class="inner"><span>token-aware-policy</span></div></a></li><li><a href="qbits.alia.policy.load-balancing.html#var-whitelist-policy"><div class="inner"><span>whitelist-policy</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">qbits.alia.policy.load-balancing</h2><pre class="doc">The policy that decides which Cassandra hosts to contact for each new query.
</pre><div class="public anchor" id="var-dc-aware-round-robin-policy"><h3>dc-aware-round-robin-policy</h3><div class="usage"><code>(dc-aware-round-robin-policy dc used-hosts-per-remote-dc)</code><code>(dc-aware-round-robin-policy dc)</code></div><pre class="doc">A data-center aware Round-robin load balancing policy.

This policy provides round-robin queries over the node of the local
datacenter. It also includes in the query plans returned a
configurable number of hosts in the remote datacenters, but those are
always tried after the local nodes. In other words, this policy
guarantees that no host in a remote datacenter will be queried unless
no host in the local datacenter can be reached.

If used with a single datacenter, this policy is equivalent to the
LoadBalancingPolicy.RoundRobin policy, but its DC awareness incurs a
slight overhead so the `round-robin-policy` policy could
be prefered to this policy in that case.

<a href="http://www.datastax.com/drivers/java/apidocs/com/datastax/driver/core/policies/DCAwareRoundRobinPolicy.html">http://www.datastax.com/drivers/java/apidocs/com/datastax/driver/core/policies/DCAwareRoundRobinPolicy.html</a></pre><div class="src-link"><a href="https://github.com/mpenet/alia/blob/master//home/mpenet/gitmu/alia/src/qbits/alia/policy/load_balancing.clj#L50">Source</a></div></div><div class="public anchor" id="var-round-robin-policy"><h3>round-robin-policy</h3><div class="usage"><code>(round-robin-policy)</code></div><pre class="doc">A Round-robin load balancing policy.

This policy queries nodes in a round-robin fashion. For a given query,
if an host fail, the next one (following the round-robin order) is
tried, until all hosts have been tried.

This policy is not datacenter aware and will include every known
Cassandra host in its round robin algorithm. If you use multiple
datacenter this will be inefficient and you will want to use the
`dc-aware-round-robin-policy` load balancing policy instead.

<a href="http://www.datastax.com/drivers/java/apidocs/com/datastax/driver/core/policies/RoundRobinPolicy.html">http://www.datastax.com/drivers/java/apidocs/com/datastax/driver/core/policies/RoundRobinPolicy.html</a></pre><div class="src-link"><a href="https://github.com/mpenet/alia/blob/master//home/mpenet/gitmu/alia/src/qbits/alia/policy/load_balancing.clj#L10">Source</a></div></div><div class="public anchor" id="var-token-aware-policy"><h3>token-aware-policy</h3><div class="usage"><code>(token-aware-policy child)</code></div><pre class="doc">A wrapper load balancing policy that add token awareness to a child policy.

This policy encapsulates another policy. The resulting policy works in
the following way:

the distance method is inherited from the child policy.  the iterator
return by the newQueryPlan method will first return the LOCAL replicas
for the query (based on Query.getRoutingKey()) if possible (i.e. if
the query getRoutingKey method doesn&apos;t return null and if
Metadata.getReplicas(java.nio.ByteBuffer) returns a non empty set of
replicas for that partition key). If no local replica can be either
found or successfully contacted, the rest of the query plan will
fallback to one of the child policy.  Do note that only replica for
which the child policy distance method returns HostDistance.LOCAL will
be considered having priority. For example, if you wrap
DCAwareRoundRobinPolicy with this token aware policy, replicas from
remote data centers may only be returned after all the host of the
local data center.

<a href="http://www.datastax.com/drivers/java/apidocs/com/datastax/driver/core/policies/TokenAwarePolicy.html">http://www.datastax.com/drivers/java/apidocs/com/datastax/driver/core/policies/TokenAwarePolicy.html</a></pre><div class="src-link"><a href="https://github.com/mpenet/alia/blob/master//home/mpenet/gitmu/alia/src/qbits/alia/policy/load_balancing.clj#L26">Source</a></div></div><div class="public anchor" id="var-whitelist-policy"><h3>whitelist-policy</h3><div class="usage"><code>(whitelist-policy child whitelist-coll)</code></div><pre class="doc">A load balancing policy wrapper that ensure that only hosts from a
provided white list will ever be returned.

This policy wraps another load balancing policy and will delegate
the choice of hosts to the wrapped policy with the exception that
only hosts contained in the white list provided when constructing
this policy will ever be returned. Any host not in the while list
will be considered {@code IGNORED} and thus will not be connected
to.

This policy can be useful to ensure that the driver only connects to
a predefined set of hosts. Keep in mind however that this policy
defeats somewhat the host auto-detection of the driver. As such,
this policy is only useful in a few special cases or for testing,
but is not optimal in general.  If all you want to do is limiting
connections to hosts of the local data-center then you should use
DCAwareRoundRobinPolicy and not this policy in particular.</pre><div class="src-link"><a href="https://github.com/mpenet/alia/blob/master//home/mpenet/gitmu/alia/src/qbits/alia/policy/load_balancing.clj#L71">Source</a></div></div></div></body></html>